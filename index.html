<!--DONE-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Quantum Cryptography</title>
    <link rel="icon" type="image/png" href="favi.png">
    <link rel="stylesheet" href="style.css" id="theme-stylesheet">
    <style>
      /* Add background image styling */
      main.hero {
        position: relative;
        background-image: url('media/quantum.jpeg');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        background-repeat: no-repeat;
        overflow: hidden;
      }
      
      /* Add overlay to improve text readability */
      main.hero::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(10, 15, 30, 0.85);
        z-index: 0;
      }
      
      /* Ensure content is above the overlay */
      .hero-inner {
        position: relative;
        z-index: 1;
      }
    </style>
  </head>
  <body>
    <header>
      <!-- Inline SVG logo (fall back avoids missing external file) -->
      <div class="logo" aria-hidden="false" style="display:inline-block; vertical-align:middle; margin-bottom:0.4rem;">
        <svg width="60" height="60" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Site logo">
          <rect width="64" height="64" rx="10" fill="#1b2740" />
          <circle cx="32" cy="24" r="12" fill="#57acf6" />
          <text x="32" y="38" font-size="18" text-anchor="middle" fill="#fff" font-family="Verdana,Arial" font-weight="700">Q</text>
        </svg>
      </div>
      <h1 style="display:inline-block; margin-left:0.6rem; vertical-align:middle;">Quantum Cryptography</h1>
      <p><em>Cryptography of the future</em></p>
      <nav>
        <a href="index.html">Home</a>
        <a href="game.html">Game</a>
        <a href="materials.html">Materials</a>
      </nav>
    </header>

    <main class="hero">
      <div class="hero-inner">
        <!-- Story Introduction -->
        <div class="story-card">
          <div class="character-badge">
            <span class="quantum-dot"></span>
            <span class="character-name">EVE</span>
            <span class="quantum-dot"></span>
          </div>
          
          <div class="story-content">
            <p class="story-text">
              Hi everyone, I'm <strong>Eve</strong>. Bob has been my crush for two years, 
              and I was sure he liked me back. But recently, I discovered he's been 
              secretly texting someone named <em>Alice</em>.
            </p>
            <p class="story-text highlight">
              I have to do something to win Bob's heart‚Äîand fast!
            </p>
          </div>
        </div>

        <!-- Mission Briefing -->
        <div class="mission-card">
          <h2 class="mission-title">
            <span class="quantum-icon">‚öõÔ∏è</span>
            Your Mission
            <span class="quantum-icon">‚öõÔ∏è</span>
          </h2>
          <div class="mission-content">
            <p>Alice and Bob are currently studying in the same <strong>Cybersecurity Class</strong>. They will continue to enhance the security of their messages. To succeed, you'll need to complete different tasks throughout the game.</p>
            <div class="mission-features">
              <div class="feature">
                <span class="feature-icon">üìñ</span>
                <span>Learn how cryptography works</span>
              </div>
              <div class="feature">
                <span class="feature-icon">‚öõÔ∏è</span>
                <span>Learn how Quantum Mechanics work</span>
              </div>
              <div class="feature">
                <span class="feature-icon">üîì</span>
                <span>Crack encrypted messages</span>
              </div>
              <div class="feature">
                <span class="feature-icon">üé≠</span>
                <span>Unlock multiple endings</span>
              </div>
            </div>
            <p class="mission-callout">Let's see what happens!</p>
          </div>
        </div>

        <!-- CTA Buttons -->
        <div class="hero-ctas">
          <a class="btn btn-primary pulse" href="game.html">
            <span>üéÆ</span> Start Your Journey
          </a>
          <a class="btn btn-outline" href="materials.html">
            <span>üìö</span> Learn More
          </a>
        </div>

        <!-- Quantum Background Effects -->
        <div class="quantum-bg">
          <div class="particle"></div>
          <div class="particle"></div>
          <div class="particle"></div>
          <div class="particle"></div>
          <div class="particle"></div>
        </div>
      </div>
    </main>

    <!-- Levels slide-out tab -->
    <div id="levels-tab" title="Open levels">Levels</div>
    <aside id="levels-sidebar" aria-hidden="true">
      <button id="levels-close" class="btn btn-outline">Close</button>
      <h3>Levels</h3>
      <ul class="levels-list">
        <li><a href="game.html">Level 1 ‚Äî Caesar's Cipher</a></li>
        <li><a href="level2.html">Level 2 ‚Äî Modern Crypto (MCQ)</a></li>
        <li><a href="level3_materials.html">Level 3 ‚Äî QKD Simulation</a></li>
      </ul>
    </aside>

    <!-- Floating Settings / Music controls -->
    <audio id="bgm" loop>
      <source src="media/bgm.mp3" type="audio/mpeg">
    </audio>
    <div id="settings-btn">‚öôÔ∏è</div>
    <div id="settings-menu">
      <div id="mute-option" class="option">Mute Music</div>
      <div id="theme-option" class="option">üîÑ Larger Fonts (Accessibility)</div>
    </div>
    <div id="info-container">
      <div id="info-icon">‚Ñπ</div>
      <div id="info-popup">This project is an informative and educational website designed to make information on quantum cryptography accessible to a wider audience.</div>
    </div>

    <footer>
      &copy; CCST9077
    </footer>
  </body>

  <!-- Audio element for background music -->
  <audio id="bgm" loop>
    <source src="media/bgm.mp3" type="audio/mpeg">
  </audio>

  <!-- BACKGROUND MUSIC SYSTEM -->
  <script>
    (function(){
      const bgm = document.getElementById('bgm');
      if(!bgm) return;
      const btn = document.getElementById('settings-btn');
      const menu = document.getElementById('settings-menu');
      const muteOption = document.getElementById('mute-option');
      let menuOpen = false;

      let savedMuted = localStorage.getItem('musicMuted') === 'true';
      let savedTime = parseFloat(localStorage.getItem('musicTime')) || 0;
      bgm.muted = savedMuted;
      bgm.currentTime = savedTime;

      window.addEventListener('click', ()=>{ bgm.play().catch(()=>{}); bgm.volume = 0.2; }, { once: true });
      bgm.volume = 0.2; bgm.play().catch(()=>{});

      setInterval(()=>{ localStorage.setItem('musicTime', bgm.currentTime); }, 1000);

      btn.onclick = ()=>{ menuOpen = !menuOpen; menu.style.display = menuOpen ? 'block' : 'none'; };
      muteOption.onclick = ()=>{ bgm.muted = !bgm.muted; localStorage.setItem('musicMuted', bgm.muted); muteOption.textContent = bgm.muted ? 'Unmute Music' : 'Mute Music'; };
      muteOption.textContent = bgm.muted ? 'Unmute Music' : 'Mute Music';
    })();
  </script>
  <!-- END BACKGROUND MUSIC SYSTEM -->

  <!-- LEVELS SIDEBAR TOGGLE SYSTEM -->
  <script>
    (function(){
      const tab = document.getElementById('levels-tab');
      const sidebar = document.getElementById('levels-sidebar');
      const closeBtn = document.getElementById('levels-close');
      if(tab && sidebar){
        tab.addEventListener('click', ()=>{ sidebar.classList.add('open'); sidebar.setAttribute('aria-hidden','false'); });
        closeBtn.addEventListener('click', ()=>{ sidebar.classList.remove('open'); sidebar.setAttribute('aria-hidden','true'); });
        document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape'){ sidebar.classList.remove('open'); sidebar.setAttribute('aria-hidden','true'); } });
      }
    })();
  </script>
  <!-- END LEVELS SIDEBAR TOGGLE SYSTEM -->

  <!-- PARALLAX EFFECT SCRIPT -->
  <script>
    (function(){
      const hero = document.querySelector('main.hero');
      if(!hero) return;
      
      let ticking = false;
      const parallaxSpeed = -0.05;
      
      // Calculate initial offset to prevent jump
      const initialScroll = window.pageYOffset;
      const initialOffset = initialScroll * parallaxSpeed;
      
      function updateParallax() {
        const scrolled = window.pageYOffset;
        const offset = scrolled * parallaxSpeed;
        
        // Apply offset relative to initial position
        hero.style.backgroundPositionY = `calc(50% + ${offset}px)`;
        
        ticking = false;
      }
      
      function requestTick() {
        if (!ticking) {
          window.requestAnimationFrame(updateParallax);
          ticking = true;
        }
      }
      
      // Set initial position
      hero.style.backgroundPositionY = `calc(50% + ${initialOffset}px)`;
      
      window.addEventListener('scroll', requestTick, { passive: true });
    })();
  </script>
  <!-- END PARALLAX EFFECT SCRIPT -->

  <!-- THEME SWITCHER SCRIPT -->
  <script>
    (function(){
      const themeOption = document.getElementById('theme-option');
      const themeSheet = document.getElementById('theme-stylesheet');
      if(!themeOption || !themeSheet) return;

      // Check for saved preference
      let useAccessibleTheme = localStorage.getItem('useAccessibleTheme') === 'true';
      
      function applyTheme(accessible) {
        if(accessible) {
          themeSheet.href = 'styl2.css';
          themeOption.textContent = 'üîÑ Standard Fonts';
          localStorage.setItem('useAccessibleTheme', 'true');
        } else {
          themeSheet.href = 'style.css';
          themeOption.textContent = 'üîÑ Larger Fonts (Accessibility)';
          localStorage.setItem('useAccessibleTheme', 'false');
        }
      }

      // Apply saved theme on load
      applyTheme(useAccessibleTheme);

      // Toggle theme on click
      themeOption.addEventListener('click', ()=>{
        useAccessibleTheme = !useAccessibleTheme;
        applyTheme(useAccessibleTheme);
      });
    })();
  </script>
  <!-- END THEME SWITCHER SCRIPT -->
</body>
</html>
